<!DOCTYPE html>
<html>
    <head>
        <title>Letter_Set</title>
        <script src="https://unpkg.com/jspsych@7.3.1"></script>
        <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.2"></script>
        <script src="https://unpkg.com/@jspsych/plugin-html-audio-response@1.0.2"></script>

        <link href="https://unpkg.com/jspsych@7.3.1/css/jspsych.css" rel="stylesheet" type="text/css" />
    </head>
    <body></body>
    <script>

        // intialize jsPsych
        var jsPsych = initJsPsych({
            on_finish: function() {
                jsPsych.data.displayData();

            }
        });
                
        var timeline = [];

        var greeting_test = {
            type: jsPsychHtmlKeyboardResponse,
            stimulus: " to this testing experiment",
        };
        timeline.push(greeting_test);

        
        var trial = {
                    type: jsPsychHtmlAudioResponse,
                    stimulus: "<p>Please record a few seconds of audio and click the button when you are done.</p>",
                    recording_duration: 10000,
                    allow_playback: true,
                    // on_finish: function(data){
                    //   const filename = `${subject_id}_${jsPsych.getProgress().current_trial_global}_audio.webm`;
                    //   jsPsychPipe.saveBase64Data("ZgNOhrfaWdyb",  filename, data.response);
                    //   // delete the base64 data to save space. store the filename instead.
                    //   data.response = filename;
                    // }
                  };
        timeline.push(trial);

        jsPsych.run(timeline);

    </script>

</html>
